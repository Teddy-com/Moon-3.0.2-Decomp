/*
 * Decompiled with CFR 0.152.
 */
package me.moon.module.impl.exploit;

import java.awt.Color;
import me.moon.event.Handler;
import me.moon.event.impl.player.UpdateEvent;
import me.moon.module.Module;
import me.moon.utils.value.impl.NumberValue;
import net.minecraft.client.multiplayer.PlayerControllerMP;
import net.minecraft.item.ItemAxe;
import net.minecraft.item.ItemPickaxe;
import net.minecraft.potion.Potion;
import net.minecraft.potion.PotionEffect;

public class Speedmine
extends Module {
    private final NumberValue<Float> speed = new NumberValue<Float>("Speed", Float.valueOf(0.2f), Float.valueOf(0.1f), Float.valueOf(1.0f), Float.valueOf(0.01f));

    public Speedmine() {
        super("SpeedMine", Module.Category.EXPLOITS, new Color(5090969).getRGB());
        this.setDescription("Mine Faster.");
    }

    @Override
    public void onDisable() {
        this.mc.thePlayer.removePotionEffect(Potion.digSpeed.getId());
    }

    @Override
    public void onEnable() {
    }

    @Handler(value=UpdateEvent.class)
    public void onUpdate(UpdateEvent event) {
        if (this.mc.thePlayer == null) {
            return;
        }
        if (event.isPre()) {
            if (this.mc.playerController.curBlockDamageMP >= ((Float)this.speed.getValue()).floatValue() && this.mc.thePlayer.getHeldItem() != null && (this.mc.thePlayer.getHeldItem().getItem() instanceof ItemPickaxe || this.mc.thePlayer.getHeldItem().getItem() instanceof ItemAxe)) {
                this.mc.playerController.curBlockDamageMP = 1.0f;
            }
            PlayerControllerMP.blockHitDelay = 0;
            this.mc.thePlayer.addPotionEffect(new PotionEffect(Potion.digSpeed.getId(), 100, 1));
        }
    }
}

